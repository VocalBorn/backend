# VocalBorn CI/CD Pipeline èªªæ˜

## ğŸ”„ Workflow è§¸ç™¼æ¢ä»¶

### ğŸŒ¿ æ‰€æœ‰åˆ†æ”¯
- **Push äº‹ä»¶**ï¼šä»»ä½•åˆ†æ”¯çš„æ¨é€éƒ½æœƒè§¸ç™¼æ¸¬è©¦å’Œä»£ç¢¼å“è³ªæª¢æŸ¥
- **Pull Request**ï¼šé‡å° main åˆ†æ”¯çš„ PR æœƒè§¸ç™¼æ¸¬è©¦å’Œä»£ç¢¼å“è³ªæª¢æŸ¥
- **æ‰‹å‹•è§¸ç™¼**ï¼šå¯é€é GitHub Actions é é¢æ‰‹å‹•åŸ·è¡Œ

## ğŸ“‹ åŸ·è¡Œéšæ®µ

### 1. ğŸ§ª Unit Tests (æ‰€æœ‰åˆ†æ”¯éƒ½åŸ·è¡Œ)
- è¨­å®š Python 3.13 æ¸¬è©¦ç’°å¢ƒ
- å®‰è£å°ˆæ¡ˆä¾è³´é …
- é…ç½®æ¸¬è©¦ç’°å¢ƒè®Šæ•¸
- åŸ·è¡Œå–®å…ƒæ¸¬è©¦ï¼ˆå¿½ç•¥éœ€è¦å¤–éƒ¨æœå‹™çš„æ¸¬è©¦ï¼‰
- ç”Ÿæˆæ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
- å¯é¸çš„ Codecov æ•´åˆ

### 2. ğŸ” Code Quality (æ‰€æœ‰åˆ†æ”¯éƒ½åŸ·è¡Œ)
- Black ä»£ç¢¼æ ¼å¼æª¢æŸ¥
- isort import æ’åºæª¢æŸ¥
- flake8 ç¨‹å¼ç¢¼è¦ç¯„æª¢æŸ¥
- mypy å‹åˆ¥æª¢æŸ¥ï¼ˆå¯é¸ï¼‰

### 3. ğŸ³ Docker Build & Push (åƒ… main åˆ†æ”¯)
- **æ¢ä»¶**ï¼šåªæœ‰åœ¨æ¨é€åˆ° `main` åˆ†æ”¯æ™‚æ‰åŸ·è¡Œ
- **ä¾è³´**ï¼šå¿…é ˆç­‰å¾… Unit Tests å’Œ Code Quality éƒ½é€šé
- å¤šå¹³å° Docker æ˜ åƒæ§‹å»ºï¼ˆlinux/amd64, linux/arm64ï¼‰
- æ¨é€åˆ° Docker Hub
- æ™ºèƒ½æ¨™ç±¤ç®¡ç†å’Œå¿«å–å„ªåŒ–

## ğŸ›¡ï¸ å®‰å…¨ä¿è­‰

- **æ¼¸é€²å¼å¤±æ•—**ï¼šä»»ä½•éšæ®µå¤±æ•—éƒ½æœƒé˜»æ­¢å¾ŒçºŒæ­¥é©Ÿ
- **åˆ†æ”¯ä¿è­·**ï¼šåªæœ‰æ¸¬è©¦é€šéçš„ main åˆ†æ”¯è®Šæ›´æ‰æœƒè§¸ç™¼ Docker æ¨é€
- **ç’°å¢ƒéš”é›¢**ï¼šæ¸¬è©¦ä½¿ç”¨ç¨ç«‹çš„ SQLite æ¸¬è©¦è³‡æ–™åº«
- **æ™ºèƒ½å¿½ç•¥**ï¼šè·³ééœ€è¦å¤–éƒ¨æœå‹™çš„æ¸¬è©¦ï¼Œç¢ºä¿ CI ç©©å®šæ€§

## ğŸ“Š åŸ·è¡ŒçŸ©é™£

| åˆ†æ”¯é¡å‹ | Unit Tests | Code Quality | Docker Push |
|---------|------------|-------------|-------------|
| `main` | âœ… | âœ… | âœ… (æ¸¬è©¦é€šéå¾Œ) |
| `develop` | âœ… | âœ… | âŒ |
| `feature/*` | âœ… | âœ… | âŒ |
| `fix/*` | âœ… | âœ… | âŒ |
| PR to main | âœ… | âœ… | âŒ |

## ğŸ”§ æœ¬åœ°æ¸¬è©¦

åœ¨æ¨é€å‰ï¼Œå»ºè­°å…ˆåœ¨æœ¬åœ°åŸ·è¡Œæ¸¬è©¦ï¼š

```bash
# åŸ·è¡Œå–®å…ƒæ¸¬è©¦
python -m pytest tests/ -v --disable-warnings \
  --ignore=tests/storage/test_audio_storage_service.py \
  --ignore=tests/therapist/test_therapist_service.py \
  -k "not test_send_email"

# ä»£ç¢¼æ ¼å¼æª¢æŸ¥
black --check src/ tests/
isort --check-only src/ tests/
flake8 src/ tests/ --max-line-length=100 --extend-ignore=E203,W503
```

é€™å€‹è¨­è¨ˆç¢ºä¿äº†æ¯æ¬¡ç¨‹å¼ç¢¼è®Šæ›´éƒ½ç¶“éåš´æ ¼çš„å“è³ªæª¢æŸ¥ï¼ŒåŒæ™‚åªæœ‰ç¶“éå®Œæ•´é©—è­‰çš„ main åˆ†æ”¯è®Šæ›´æ‰æœƒéƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒã€‚